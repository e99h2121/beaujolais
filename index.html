<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
<!-- jQuery本体 -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<!-- jquery-csv -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/1.0.11/jquery.csv.min.js"></script>
<!--
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="./jquery.csv.js"></script>
-->
    <script>
    
$(function() {

  function parseCsv(data) {
    // CSVを配列で読み込む
    var csv = $.csv.toArrays(data);

    var insert = '';
    $(csv).each(function(i) {
      if (this.length > 0) {
        insert += '<tr>';
        $(this).each(function() {
            insert += '<td>' + this + '</td>';
        });
        insert += '</tr>';
      }
      var target = (i === 0) ? "thead" : "tbody";
      $("#result "+target).append(insert);
      insert = "";
    });

    const messageNo = Math.floor( Math.random() * messages.length);
    insert[messageNo];

  }

  // CSVの読み込み
  $.get('data1.csv', parseCsv, 'text');

});


    </script>
</head>
<body>
  <table id="result">
    <thead></thead>
    <tbody></tbody>
  </table>
</body>
</html>
<!--
<html>
<body>
<script type="text/javascript" charset="UTF-8">
    function breakthrough() {
        var conv = "";
        const messages = ['問題解決こそが仕事でありますぞ。',
                          '本当の仕事とは、何か大きな問題に直面したときから始まる。',
                          'プロ、もしくはプロであるべきポジションの仕事人の無自覚や無神経さを「まぬけ」と呼びます。',
                          '例えば「どこでもつながる携帯電話」というのを考えるとしましょう。これは理想として言えば、世界中のどこに行ってもつながる、地下だろうが高い山のてっぺんだろうが、太平洋のど真ん中だろうが通話ができるっていうのが理想じゃありませんか？'];
        const messageNo = Math.floor( Math.random() * messages.length);

        var mackytext = "";
    	//mackytext =  mackytext + '\n' + document.getElementById('origin').value.replace(/。/g, suffix[suffixNo]);
    	mackytext =  conv + '\n';
        mackytext =  mackytext + messages[messageNo] + '\n';
    	document.getElementById('mackytext').value = mackytext;

    }
    function tweet() {
        var left = Math.round(window.screen.width / 2 - 275);
        var top = (window.screen.height > 420) ? Math.round(window.screen.height / 2 - 210) : 0;
        window.open(
            "https://twitter.com/intent/tweet?text=" + encodeURIComponent(document.getElementById("mackytext").value + " at: https://e99h2121.github.io/breakthrough-generator/" ),
            null,
            "scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,left=" + left + ",top=" + top);
    }
    
</script>

<TABLE>
  <TBODY>
    <TR>
      <TD><b>文章を貼り付ける</b></TD>
    </TR>
    <TR>
      <TD>
      <FONT size="-1">対象を貼り付けるのですぞ。</FONT>
      </TD>
    </TR>
  </TBODY>
</TABLE>
<TABLE>
  <TBODY>
    <TR>
      <TD><textarea cols="80" rows="5" id="origin"></textarea></TD>
    </TR>
    <TR>
      <TD>
        <p><input type="button" value="ブレイクスルーする" onclick="breakthrough();"></p>
      </TD>
    </TR>
  </TBODY>
</TABLE>
<HR>
<TABLE>
    <TR>
      <TD>
        <p><textarea cols="80" rows="10" id="mackytext">ここに表示されるのですぞ。</textarea></p></TD>
    </TR>
</TABLE>
<HR>

<button id="tweet" onclick="tweet();">結果をTweetするのですぞ</button> 

</body>
</html>
-->
